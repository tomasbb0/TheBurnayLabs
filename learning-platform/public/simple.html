<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning with Tomas</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        body.logged-in { display: block; background: #F9FAFB; }
        .login-container { background: white; padding: 48px; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); width: 100%; max-width: 420px; }
        .login-header { text-align: center; margin-bottom: 32px; }
        .logo-icon { width: 64px; height: 64px; background: #4F46E5; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; }
        .logo-icon svg { width: 36px; height: 36px; stroke: white; }
        h1 { font-size: 24px; font-weight: 700; margin-bottom: 8px; }
        .subtitle { color: #6B7280; font-size: 14px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-size: 14px; font-weight: 500; margin-bottom: 8px; color: #4B5563; }
        .form-group input { width: 100%; padding: 12px 16px; border: 1px solid #E5E7EB; border-radius: 8px; font-size: 15px; }
        .form-group input:focus { outline: none; border-color: #4F46E5; box-shadow: 0 0 0 3px rgba(79,70,229,0.1); }
        .btn { display: block; width: 100%; padding: 12px 24px; background: #4F46E5; color: white; border: none; border-radius: 8px; font-size: 15px; font-weight: 500; cursor: pointer; }
        .btn:hover { background: #4338CA; }
        .error-message { margin-top: 16px; padding: 12px; background: #FEF2F2; border: 1px solid #FECACA; border-radius: 8px; color: #EF4444; font-size: 14px; text-align: center; display: none; }
        .error-message.show { display: block; }
        .hidden { display: none !important; }
        .dashboard { display: none; min-height: 100vh; width: 100%; background: #F9FAFB; }
        .dashboard.active { display: block; }
        .main-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 24px; background: white; border-bottom: 1px solid #E5E7EB; }
        .header-left, .header-right { display: flex; align-items: center; gap: 12px; }
        .logo-small { width: 36px; height: 36px; background: #4F46E5; border-radius: 8px; display: flex; align-items: center; justify-content: center; }
        .logo-small svg { width: 20px; height: 20px; stroke: white; }
        .main-header h1 { font-size: 18px; }
        .btn-icon { width: 40px; height: 40px; border: none; background: transparent; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .btn-icon:hover { background: #F3F4F6; }
        .btn-icon svg { width: 20px; height: 20px; stroke: #4B5563; }
        .role-badge { font-size: 11px; padding: 4px 8px; border-radius: 12px; font-weight: 600; background: #DBEAFE; color: #1D4ED8; }
        .main-content { display: flex; min-height: calc(100vh - 65px); }
        .sidebar { width: 280px; background: white; border-right: 1px solid #E5E7EB; padding: 20px; }
        .sidebar h3 { font-size: 14px; color: #6B7280; margin-bottom: 16px; }
        .student-list { display: flex; flex-direction: column; gap: 8px; }
        .student-item { display: flex; align-items: center; gap: 12px; padding: 12px; border: 1px solid #E5E7EB; border-radius: 8px; cursor: pointer; }
        .student-item:hover { background: #F3F4F6; }
        .student-item.active { background: #4F46E5; color: white; border-color: #4F46E5; }
        .student-avatar { width: 40px; height: 40px; background: #818CF8; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; }
        .main-panel { flex: 1; padding: 24px; }
        .welcome-content { text-align: center; padding: 80px 20px; }
        .welcome-content svg { width: 80px; height: 80px; stroke: #818CF8; margin-bottom: 24px; }
        .welcome-content h2 { font-size: 24px; margin-bottom: 8px; }
        .welcome-content p { color: #6B7280; }
        .btn-small { padding: 8px 16px; font-size: 13px; background: #4F46E5; color: white; border: none; border-radius: 8px; cursor: pointer; }
        .empty-state { text-align: center; padding: 40px; color: #6B7280; }
        .nav-tabs { display: flex; gap: 4px; flex-direction: column; }
        .nav-tab { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-size: 14px; color: #4B5563; text-align: left; width: 100%; }
        .nav-tab:hover { background: #F3F4F6; }
        .nav-tab.active { background: #4F46E5; color: white; }
        .nav-tab svg { width: 20px; height: 20px; }
        .panel { display: none; }
        .panel.active { display: block; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .panel-header h2 { font-size: 20px; display: flex; align-items: center; gap: 12px; }
        .items-list { display: flex; flex-direction: column; gap: 12px; }
        .item-card { display: flex; gap: 16px; padding: 20px; background: white; border: 1px solid #E5E7EB; border-radius: 8px; }
        .item-icon { width: 48px; height: 48px; background: #F3F4F6; border-radius: 8px; display: flex; align-items: center; justify-content: center; }
        .item-icon svg { width: 24px; height: 24px; stroke: #4F46E5; }
        .item-content { flex: 1; }
        .item-title { font-weight: 600; margin-bottom: 4px; }
        .item-desc { font-size: 14px; color: #6B7280; margin-bottom: 8px; }
        .item-meta { font-size: 12px; color: #9CA3AF; }
        .status-badge { display: inline-block; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 500; }
        .status-badge.pending { background: #FEF3C7; color: #D97706; }
        .status-badge.completed { background: #D1FAE5; color: #059669; }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .modal { background: white; border-radius: 12px; width: 100%; max-width: 500px; max-height: 90vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #E5E7EB; }
        .modal-header h3 { font-size: 18px; }
        .modal-close { width: 36px; height: 36px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-size: 20px; }
        .modal-content { padding: 20px; }
    </style>
</head>
<body>
    <div id="login-screen" class="login-container">
        <div class="login-header">
            <div class="logo-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                </svg>
            </div>
            <h1>Learning with Tomas</h1>
            <p class="subtitle">Student Learning Platform</p>
        </div>
        <form id="login-form">
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" required placeholder="Enter your username">
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" required placeholder="Enter your password">
            </div>
            <button type="submit" class="btn">Sign In</button>
            <div id="login-error" class="error-message"></div>
        </form>
    </div>

    <div id="dashboard-screen" class="dashboard">
        <header class="main-header">
            <div class="header-left">
                <div class="logo-small">
                    <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                    </svg>
                </div>
                <h1>Learning with Tomas</h1>
            </div>
            <div class="header-right">
                <span id="current-user-name">Welcome!</span>
                <span id="user-role-badge" class="role-badge">admin</span>
                <button id="logout-btn" class="btn-icon" title="Logout">
                    <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                </button>
            </div>
        </header>
        <div class="main-content">
            <aside class="sidebar">
                <div id="admin-panel">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
                        <h3>Students</h3>
                        <button id="add-student-btn" class="btn-small">+ Add</button>
                    </div>
                    <div id="student-list" class="student-list">
                        <div class="empty-state">No students yet</div>
                    </div>
                </div>
                <div id="student-nav" class="nav-tabs hidden" style="margin-top:20px">
                    <button class="nav-tab active" data-tab="diagnostics">Diagnostics</button>
                    <button class="nav-tab" data-tab="games">Games</button>
                    <button class="nav-tab" data-tab="tests">Tests</button>
                    <button class="nav-tab" data-tab="links">Links</button>
                    <button class="nav-tab" data-tab="progress">Progress</button>
                </div>
            </aside>
            <main class="main-panel">
                <div id="welcome-panel" class="panel active">
                    <div class="welcome-content">
                        <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                        </svg>
                        <h2>Welcome!</h2>
                        <p id="welcome-message">Select a student from the sidebar to view their dashboard.</p>
                    </div>
                </div>
                <div id="diagnostics-panel" class="panel">
                    <div class="panel-header"><h2>Diagnostics</h2><button id="add-diagnostic-btn" class="btn-small">+ Assign</button></div>
                    <div id="diagnostics-list" class="items-list"><div class="empty-state">No diagnostics assigned</div></div>
                </div>
                <div id="games-panel" class="panel">
                    <div class="panel-header"><h2>Games</h2><button id="add-game-btn" class="btn-small">+ Add Game</button></div>
                    <div id="games-list" class="items-list"><div class="empty-state">No games assigned</div></div>
                </div>
                <div id="tests-panel" class="panel">
                    <div class="panel-header"><h2>Tests</h2><button id="add-test-btn" class="btn-small">+ Add Test</button></div>
                    <div id="tests-list" class="items-list"><div class="empty-state">No tests assigned</div></div>
                </div>
                <div id="links-panel" class="panel">
                    <div class="panel-header"><h2>Links</h2><button id="add-link-btn" class="btn-small">+ Add Link</button></div>
                    <div id="links-list" class="items-list"><div class="empty-state">No links saved</div></div>
                </div>
                <div id="progress-panel" class="panel">
                    <div class="panel-header"><h2>Progress</h2><button id="add-progress-btn" class="btn-small">+ Add Topic</button></div>
                    <div id="progress-list" class="items-list"><div class="empty-state">No progress tracked</div></div>
                </div>
            </main>
        </div>
    </div>

    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">Modal</h3>
                <button class="modal-close" onclick="closeModal()">X</button>
            </div>
            <div id="modal-content" class="modal-content"></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="simple.js"></script>
</body>
</html>
