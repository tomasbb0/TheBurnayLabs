<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ Constr√≥i o Teu Robot! - Build Your Robot!</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Nunito', sans-serif; background: linear-gradient(135deg, #059669 0%, #0D9488 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .game-card { background: white; border-radius: 24px; padding: 32px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        h1 { font-size: 2.5rem; text-align: center; margin-bottom: 8px; }
        h2 { font-size: 1.2rem; text-align: center; color: #6B7280; margin-bottom: 24px; }
        .robot-display { display: flex; flex-direction: column; align-items: center; gap: 8px; margin: 24px 0; padding: 24px; background: #ECFDF5; border-radius: 16px; }
        .robot-row { display: flex; gap: 8px; justify-content: center; }
        .robot-part { width: 65px; height: 65px; background: #D1FAE5; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 2rem; transition: all 0.3s; border: 3px solid #A7F3D0; }
        .robot-part.unlocked { background: #10B981; border-color: #059669; transform: scale(1.1); }
        .robot-part.locked { opacity: 0.4; background: #E5E7EB; border-color: #D1D5DB; }
        .question-box { background: #ECFDF5; border-radius: 16px; padding: 24px; margin: 24px 0; text-align: center; }
        .question-emoji { font-size: 4rem; margin-bottom: 16px; }
        .question-text { font-size: 1.5rem; font-weight: 700; color: #1F2937; margin-bottom: 8px; }
        .question-hint { font-size: 1rem; color: #6B7280; }
        .answers { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 24px; }
        .answer-btn { padding: 16px 24px; font-size: 1.2rem; font-weight: 600; border: 3px solid #E5E7EB; border-radius: 12px; background: white; cursor: pointer; transition: all 0.2s; font-family: inherit; }
        .answer-btn:hover { border-color: #10B981; background: #ECFDF5; transform: translateY(-2px); }
        .answer-btn.correct { background: #D1FAE5; border-color: #10B981; }
        .answer-btn.wrong { background: #FEE2E2; border-color: #EF4444; }
        .progress { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .stars { font-size: 1.5rem; }
        .level-badge { background: #059669; color: white; padding: 8px 16px; border-radius: 20px; font-weight: 700; }
        .celebration { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 100; }
        .celebration-content { background: white; border-radius: 24px; padding: 48px; text-align: center; max-width: 500px; }
        .celebration h2 { font-size: 2rem; margin: 16px 0; }
        .celebration .emoji { font-size: 5rem; }

        /* Small transient success splash (for each correct answer) */
        .success-splash { position: fixed; left: 50%; top: 18%; transform: translateX(-50%) translateY(-10px); background: linear-gradient(90deg, #10B981, #06B6D4); color: white; padding: 12px 24px; border-radius: 20px; font-weight: 800; font-size: 1.25rem; z-index: 200; opacity: 0; transition: all 0.35s cubic-bezier(.22,.9,.25,1); }
        .success-splash.visible { opacity: 1; transform: translateX(-50%) translateY(0) scale(1.05); }
        .play-btn { background: #059669; color: white; border: none; padding: 16px 48px; font-size: 1.2rem; font-weight: 700; border-radius: 12px; cursor: pointer; font-family: inherit; margin-top: 16px; }
        .play-btn:hover { background: #047857; }
        .hidden { display: none !important; }
        .score-display { text-align: center; font-size: 1.1rem; color: #4B5563; }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-card">
            <h1>ü§ñ Constr√≥i o Teu Robot!</h1>
            <h2>Build Your Robot!</h2>
            
            <div class="progress">
                <span class="stars" id="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                <span class="level-badge" id="level">N√≠vel 1</span>
            </div>
            <div class="score-display">Pe√ßas: <span id="parts">0</span>/6</div>
            
            <div class="robot-display">
                <div class="robot-row">
                    <div class="robot-part locked" id="part-0">ü§ñ</div>
                </div>
                <div class="robot-row">
                    <div class="robot-part locked" id="part-1">ü¶æ</div>
                    <div class="robot-part locked" id="part-2">ü¶æ</div>
                </div>
                <div class="robot-row">
                    <div class="robot-part locked" id="part-3">‚öôÔ∏è</div>
                </div>
                <div class="robot-row">
                    <div class="robot-part locked" id="part-4">ü¶ø</div>
                    <div class="robot-part locked" id="part-5">ü¶ø</div>
                </div>
            </div>
            
            <div class="question-box">
                <div class="question-emoji" id="emoji">üé®</div>
                <div class="question-text" id="question">Loading...</div>
                <div class="question-hint" id="hint"></div>
            </div>
            
            <div class="answers" id="answers"></div>
        </div>
    </div>
    
    <div class="celebration hidden" id="celebration">
        <div class="celebration-content">
            <div class="emoji">üéâü§ñüéâ</div>
            <h2>Parab√©ns! Congratulations!</h2>
            <p>O teu robot est√° pronto! Your robot is ready!</p>
            <button class="play-btn" onclick="location.reload()">Jogar Novamente / Play Again</button>
        </div>
    </div>
    
    <script>
        const levels = [
            { theme: 'Cores', questions: [
                { emoji: 'üü¢', q: 'Que cor √© esta?', hint: 'What color?', answer: 'Verde', options: ['Azul', 'Verde', 'Amarelo', 'Vermelho'] },
                { emoji: 'üü£', q: 'Que cor √© esta?', hint: 'What color?', answer: 'Roxo', options: ['Rosa', 'Roxo', 'Azul', 'Vermelho'] },
                { emoji: 'üü†', q: 'Que cor √© esta?', hint: 'What color?', answer: 'Laranja', options: ['Amarelo', 'Vermelho', 'Laranja', 'Rosa'] }
            ]},
            { theme: 'Opostos', questions: [
                { emoji: 'üî•', q: 'O fogo √©...', hint: 'Fire is...', answer: 'Quente', options: ['Frio', 'Quente', 'Morno', 'Gelado'] },
                { emoji: 'üßä', q: 'O gelo √©...', hint: 'Ice is...', answer: 'Frio', options: ['Quente', 'Frio', 'Morno', 'Quente'] },
                { emoji: 'üåû', q: 'De dia est√°...', hint: 'During the day it is...', answer: 'Claro', options: ['Escuro', 'Claro', 'Cinzento', 'Preto'] }
            ]},
            { theme: 'Emo√ß√µes', questions: [
                { emoji: 'üòä', q: 'Como est√°?', hint: 'How is he feeling?', answer: 'Feliz', options: ['Triste', 'Feliz', 'Zangado', 'Assustado'] },
                { emoji: 'üò¢', q: 'Como est√°?', hint: 'How is she feeling?', answer: 'Triste', options: ['Feliz', 'Triste', 'Contente', 'Calmo'] },
                { emoji: 'üò†', q: 'Como est√°?', hint: 'How is he feeling?', answer: 'Zangado', options: ['Feliz', 'Triste', 'Zangado', 'Cansado'] }
            ]},
            { theme: 'Instrumentos', questions: [
                { emoji: 'üé∏', q: 'O que √© isto?', hint: 'What is this?', answer: 'Guitarra', options: ['Piano', 'Guitarra', 'Violino', 'Flauta'] },
                { emoji: 'üéπ', q: 'O que √© isto?', hint: 'What is this?', answer: 'Piano', options: ['Piano', 'Guitarra', 'Bateria', 'Trompete'] },
                { emoji: 'ü•Å', q: 'O que √© isto?', hint: 'What is this?', answer: 'Bateria', options: ['Guitarra', 'Piano', 'Bateria', 'Tambor'] }
            ]},
            { theme: 'Desportos', questions: [
                { emoji: '‚öΩ', q: 'Que desporto?', hint: 'What sport?', answer: 'Futebol', options: ['Basquetebol', 'Futebol', 'T√©nis', 'Voleibol'] },
                { emoji: 'üèÄ', q: 'Que desporto?', hint: 'What sport?', answer: 'Basquetebol', options: ['Futebol', 'Basquetebol', 'Andebol', 'Rugby'] },
                { emoji: 'üéæ', q: 'Que desporto?', hint: 'What sport?', answer: 'T√©nis', options: ['Badminton', 'Golfe', 'T√©nis', 'Pingue-pongue'] }
            ]},
            { theme: 'Escola', questions: [
                { emoji: 'üìö', q: 'O que s√£o?', hint: 'What are these?', answer: 'Livros', options: ['Cadernos', 'Livros', 'Revistas', 'Jornais'] },
                { emoji: '‚úèÔ∏è', q: 'O que √© isto?', hint: 'What is this?', answer: 'L√°pis', options: ['Caneta', 'L√°pis', 'Marcador', 'Giz'] },
                { emoji: 'üéí', q: 'O que √© isto?', hint: 'What is this?', answer: 'Mochila', options: ['Saco', 'Mala', 'Mochila', 'Bolsa'] }
            ]}
        ];
        
        let currentLevel = 0, currentQ = 0, stars = 5, parts = 0;
        
        function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }
        
        function showQuestion() {
            const level = levels[currentLevel];
            const q = level.questions[currentQ];
            document.getElementById('level').textContent = 'N√≠vel ' + (currentLevel + 1) + ': ' + level.theme;
            document.getElementById('emoji').textContent = q.emoji;
            document.getElementById('question').textContent = q.q;
            document.getElementById('hint').textContent = q.hint;
            
            const answersDiv = document.getElementById('answers');
            answersDiv.innerHTML = '';
            shuffle([...q.options]).forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = opt;
                btn.disabled = false; // ensure buttons are enabled
                btn.onclick = () => checkAnswer(opt, q.answer, btn);
                answersDiv.appendChild(btn);
            });
        }
        
        function checkAnswer(selected, correct, btn) {
            const btns = document.querySelectorAll('.answer-btn');
            btns.forEach(b => b.disabled = true);
            
            if (selected === correct) {
                btn.classList.add('correct');
                setTimeout(() => nextQuestion(), 800);
            } else {
                btn.classList.add('wrong');
                stars = Math.max(0, stars - 1);
                document.getElementById('stars').textContent = '‚≠ê'.repeat(stars) + '‚òÜ'.repeat(5 - stars);
                btns.forEach(b => { if (b.textContent === correct) b.classList.add('correct'); });
                setTimeout(() => nextQuestion(), 1500);
            }
        }
        
        function nextQuestion() {
            currentQ++;
            if (currentQ >= levels[currentLevel].questions.length) {
                const unlockedPart = partNames[currentLevel];
                document.getElementById('part-' + currentLevel).classList.remove('locked');
                document.getElementById('part-' + currentLevel).classList.add('unlocked');
                parts++;
                document.getElementById('parts').textContent = parts;
                playPling();
                const remaining = partNames.slice(currentLevel + 1);
                showUnlockNotice(unlockedPart, remaining);
                currentLevel++;
                currentQ = 0;
                if (currentLevel >= levels.length) {
                    document.getElementById('celebration').classList.remove('hidden');
                    return;
                }
            }
            showQuestion();
        }
        
        showQuestion();
    </script>
</body>
</html>
